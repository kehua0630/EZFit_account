/*! jQuery TWzipcode v1.7.15 , Licensed MIT (c) essoduke.org | https://code.essoduke.org/twzipcode/ */
(function(g,p,q,r){
	function n(a){return"string"===typeof a?a.replace(/[\u53f0]+/gi,"\u81fa"):a}
	function m(a,b){this.container=g(a);this.options=g.extend({},{countyName:"county",css:[],detect:!1,districtName:"district",googleMapsKey:"",hideCounty:[],hideDistrict:[],onCountySelect:null,onDistrictSelect:null,onZipcodeKeyUp:null,readonly:1,zipcodeName:"zipcode",zipcodePlaceholder:"\u90f5\u905e\u5340\u865f",zipcodeIntoDistrict:!1},b);this.init()}var f={"\u81fa\u5317\u5e02":{"\u4e2d\u6b63\u5340":"100","\u5927\u540c\u5340":"103","\u4e2d\u5c71\u5340":"104","\u677e\u5c71\u5340":"105","\u5927\u5b89\u5340":"106","\u842c\u83ef\u5340":"108","\u4fe1\u7fa9\u5340":"110","\u58eb\u6797\u5340":"111","\u5317\u6295\u5340":"112","\u5167\u6e56\u5340":"114","\u5357\u6e2f\u5340":"115","\u6587\u5c71\u5340":"116"},

};m.prototype={VERSION:"1.7.15",data:
	function(){var a=this.wrap;return"undefined"!==typeof f[a.county.val()]?f[a.county.val()]:f},serialize:
		function(){var a=[],b={},c={},e={};b=this.container.find("select,input");b.length?b.each(function(){c=g(this);a.push(c.attr("name")+"="+c.val())}):g(this).children().each(function(){e=
g(this);a.push(e.attr("name")+"="+e.val())});return a.join("&")},destroy:function(){g.data(this.container.get(0),"twzipcode",null);if(this.container.length)return this.container.empty().off("change.twzipcode keyup.twzipcode blur.twzipcode")},get:function(a){function b(a){"undefined"!==typeof c.wrap[a]&&e.push(c.wrap[a].val())}var c=this,e=[];"function"===typeof a?a.call(this,this.wrap.county.val(),this.wrap.district.val(),this.wrap.zipcode.val()):"string"===typeof a?a.split(",").forEach(b):Array.isArray(a)?
a.forEach(b):e=this.wrap;return e},set:function(a){var b=g.extend({},{county:"",district:"",zipcode:""},a);try{"string"===typeof a||"number"===typeof a?this.wrap.zipcode.val(a).trigger("blur.twzipcode"):(b.zipcode&&this.wrap.zipcode.val(b.zipcode).trigger("blur.twzipcode"),b.county&&this.wrap.county.val(b.county).trigger("change.twzipcode"),b.district&&this.wrap.district.val(b.district).trigger("change.twzipcode"))}catch(c){console.warn(c.message)}finally{return this.container}},reset:function(a,
b){var c=this.wrap,e=this.options,d="",l=[];switch(b){case "district":c.district.html('<option value="">\u9109\u93ae\u5e02\u5340</option>');break;default:c.county.html('<option value="">\u7e23\u5e02</option>');c.district.html('<option value="">\u9109\u93ae\u5e02\u5340</option>');for(d in f)"undefined"!==typeof f[d]&&-1===e.hideCounty.indexOf(d)&&l.push('<option value="'+d+'">'+d+"</option>");g(l.join("")).appendTo(c.county)}c.zipcode.val("")},bindings:function(){var a=this,b=a.options,c=a.wrap,e=
"",d="",l="";c.county.on("change.twzipcode",function(){var k=g(this).val(),h="",d=[];c.district.empty();if(k){if(!0===b.zipcodeIntoDistrict)for(h in f[k])"undefined"!==typeof f[k][h]&&-1===b.hideDistrict.indexOf(h)&&-1===b.hideDistrict.indexOf(f[k][h])&&(d.push('<option value="'+h+'">'),d.push(f[k][h]+" "+h),d.push("</option>"));else for(h in f[k])"undefined"!==typeof f[k][h]&&-1===b.hideDistrict.indexOf(h)&&-1===b.hideDistrict.indexOf(f[k][h])&&(d.push('<option value="'+h+'">'),d.push(h),d.push("</option>"));
c.district.append(d.join("")).trigger("change.twzipcode")}else c.county.find("option:first").prop("selected",!0),a.reset("district");"function"===typeof b.onCountySelect&&b.onCountySelect.call(this)});c.district.on("change.twzipcode",function(){var a=g(this).val(),d=n(c.county.val());d&&c.zipcode.val(f[d][a]);"function"===typeof b.onDistrictSelect&&b.onDistrictSelect.call(this)});c.zipcode.on("keyup.twzipcode blur.twzipcode",function(){var a=g(this),d="",e="";a.val(a.val().replace(/[^0-9]/g,""));
a=a.val().toString();if(3===a.length)for(d in f)if("undefined"!==typeof f[d])for(e in f[d])if("undefined"!==typeof f[d][e]&&a===f[d][e]){c.county.val(d).trigger("change.twzipcode");c.district.val(e).trigger("change.twzipcode");break}"function"===typeof b.onZipcodeKeyUp&&b.onZipcodeKeyUp.call(this)});(function(){var b=a.role.zipcode.data(),c=a.role.county.data(),d=a.role.district.data(),e;for(e in b)"role"!==e&&a.role.zipcode.find(":input").attr(e,b[e]);for(e in c)"role"!==e&&a.role.county.find("select").attr(e,
c[e]);for(e in d)"role"!==e&&a.role.district.find("select").attr(e,d[e])})();e="undefined"!==typeof b.zipcodeSel?b.zipcodeSel:"undefined"!==typeof a.role.zipcode.data("value")?a.role.zipcode.data("value"):b.zipcodeSel;d="undefined"!==typeof b.countySel?b.countySel:"undefined"!==typeof a.role.county.data("value")?a.role.county.data("value"):b.countySel;l="undefined"!==typeof b.districtSel?b.districtSel:"undefined"!==typeof a.role.district.data("value")?a.role.district.data("value"):b.districtSel;d&&
(d=n(d),a.wrap.county.val(d).trigger("change.twzipcode"),"undefined"!==typeof f[d]&&"undefined"!==typeof f[d][l]&&a.wrap.district.val(l).trigger("change.twzipcode"));e&&3===e.toString().length&&a.wrap.zipcode.val(e).trigger("blur.twzipcode")},geoLocation:function(a){var b=this,c=navigator.geolocation,e=b.options;c&&a&&c.getCurrentPosition(function(c){var d={};"coords"in c&&"latitude"in c.coords&&"longitude"in c.coords&&(d=[c.coords.latitude,c.coords.longitude],g.getJSON("https://maps.googleapis.com/maps/api/geocode/json",
{key:e.googleMapsKey,sensor:!1,latlng:d.join(",")},function(d){d&&"undefined"!==typeof d.results&&"undefined"!==typeof d.results[0].address_components&&"undefined"!==typeof d.results[0].address_components[0]&&(d=d.results[0].address_components[d.results[0].address_components.length-1].long_name)&&b.wrap.zipcode.val(d.toString()).trigger("blur.twzipcode");"function"===typeof a&&a.call(b,c)}))},function(a){console.error(a)},{maximumAge:6E5,timeout:3E3,enableHighAccuracy:!1})},init:function(){var a=
this.container,b=this.options,c={county:a.find("[data-role=county]:first"),district:a.find("[data-role=district]:first"),zipcode:a.find("[data-role=zipcode]:first")},e=c.county.data("name")||b.countyName,d=c.district.data("name")||b.districtName,f=c.zipcode.data("name")||b.zipcodeName,k=c.zipcode.data("placeholder")||b.zipcodePlaceholder,h=c.zipcode.data("readonly")||b.readonly;g("<select/>").attr("name",e).addClass(c.county.data("style")||("undefined"!==typeof b.css[0]?b.css[0]:"")).appendTo(c.county.length?
c.county:a);g("<select/>").attr("name",d).addClass(c.district.data("style")||("undefined"!==typeof b.css[1]?b.css[1]:"")).appendTo(c.district.length?c.district:a);g("<input/>").attr({type:"text",name:f,placeholder:k}).prop("readonly",h).addClass(c.zipcode.data("style")||("undefined"!==typeof b.css[2]?b.css[2]:"")).appendTo(c.zipcode.length?c.zipcode:a);this.wrap={county:a.find('select[name="'+e+'"]:first'),district:a.find('select[name="'+d+'"]:first'),zipcode:a.find('input[type=text][name="'+f+'"]:first')};
!0===b.zipcodeIntoDistrict&&this.wrap.zipcode.hide();this.role=c;this.reset();this.bindings();this.geoLocation(b.detect)}};g.fn.twzipcode=function(a){var b={},c=[],e=arguments;return"string"===typeof a?(this.each(function(){b=g.data(this,"twzipcode");b instanceof m&&"function"===typeof b[a]&&(c=b[a].apply(b,Array.prototype.slice.call(e,1)))}),"undefined"!==typeof c?c:this):this.each(function(){g.data(this,"twzipcode")||g.data(this,"twzipcode",new m(this,a))})}})(window.jQuery||{},window,document);
